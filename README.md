# IAS 密碼櫃 - 互動式前端原型

## 📌 專案簡介

專為 Interlace Archive System（IAS）密室逃脫謎題中的核心裝置 —— 「密碼櫃（Cabinet）」的全功能互動式前端介面。玩家透過操作 12 層抽屜、拖曳翻轉 Disk、插入讀卡機等互動方式進行時間旅行解謎。

本專案已完成完整的 UI 原型與核心互動邏輯，包含**紅藍指針記分板系統**、**紅指針抽屜開啟限制機制**、逼真的 Disk 操作體驗、視覺動畫效果、以及模擬資料顯示系統。

---

## 🎯 已完成功能

### ⏰ 紅藍指針記分板系統
- ✅ **籃球記分板風格**：左右對稱的指針顯示器，清晰易讀
- ✅ **羅馬數字顯示**：紅指針(I~XII)、藍指針(I~XII)，對應抽屜編號(1~12)
- ✅ **固定容器尺寸**：100x80px 固定容器，解決羅馬數字寬度不一致問題
- ✅ **發光效果設計**：紅色 (#ff4757) 和藍色 (#3742fa) 發光邊框與文字
- ✅ **智能藍指針調整**：點擊藍指針或時鐘圖示 🕐 彈出時鐘面板
- ✅ **12點位時鐘選擇器**：羅馬數字圓形排列，精確角度定位，即時更新指針值
- ✅ **測試控制功能**：🎲 隨機指針（只影響紅指針）、🔄 重置指針按鈕
- ✅ **動畫效果**：指針更新時的縮放動畫、脈衝分隔符、時鐘指針轉動
- ✅ **響應式設計**：手機版垂直排列，電腦版水平排列
- ✅ **彈窗控制**：ESC 鍵、背景點擊、×按鈕多種關閉方式

### 🎮 抽屜開啟限制機制（謎題核心）
- ✅ **紅指針權限控制**：只有 1號、3號抽屜，以及紅指針指向的抽屜可以開啟
- ✅ **動態權限更新**：紅指針改變時，抽屜可用性即時更新
- ✅ **智能視覺回饋**：受限制的抽屜顯示為灰色禁用狀態，包含🔒圖示
- ✅ **錯誤提示系統**：嘗試開啟受限抽屜時顯示紅色提示訊息
- ✅ **謎題悖論解決**：已開啟的抽屜始終可以關閉，即使紅指針後來改變
- ✅ **Debug 模式**：開發時可設定 `DEBUG_MODE = true` 關閉限制（僅JS內部）
- ✅ **統一禁用樣式**：所有禁用狀態（受限制、臨時禁用）統一為灰色，簡化視覺複雜度

### 🗂️ 抽屜系統
- ✅ **12 層抽屜結構**：羅馬數字標示（I~XII），對應時間指針（1~12）
- ✅ **Bootstrap accordion 手風琴效果**：流暢的展開收合動畫
- ✅ **智能抽屜互動**：同時只能開啟一層抽屜，其他自動禁用
- ✅ **深色科技風格設計**：符合 IAS 世界觀
- ✅ **狀態圖示**：第一層抽屜（I）🔓 解鎖、第二層抽屜（II）🔒 鎖定圖示
- ✅ **禁用狀態視覺回饋**：透明度、顏色、游標變更

### 💿 Disk 操作系統（全面優化）
- ✅ **實體 Disk 元件**：可視化的圓形 Disk，支援 A/B 雙面設計
- ✅ **底部編號標籤**：Disk 編號顯示於底部綠色科技風標籤，美觀易識別
- ✅ **拖曳功能**：完整的 HTML5 drag & drop API 整合
- ✅ **翻轉動畫**：點擊翻轉按鈕可切換 A/B 面，含旋轉動畫效果
- ✅ **雙面差異化**：A 面（💿 綠色邊框）、B 面（📀 橙色邊框）
- ✅ **狀態指示**：拖曳時透明度變化、旋轉效果
- ✅ **面向自動識別**：智能判斷當前顯示面，避免初始狀態錯誤
- ✅ **圖示系統優化**：A面使用 💿 (1F4BF)、B面使用 📀 (1F4C0)
- ✅ **結構優化**：disk-container 與 disk-id-label 分離設計，提升視覺層次

### 🔌 讀卡機系統
- ✅ **仿真光碟機設計**：模擬真實光碟機外觀，含插槽與狀態燈
- ✅ **靈活佈局系統**：插槽區域自動適應容器大小，不再使用固定高度
- ✅ **拖曳區域偵測**：當 Disk 拖曳至讀卡機上方時藍色高亮顯示
- ✅ **智能狀態管理**：插入時隱藏提示文字和佔位圖示，退出時恢復
- ✅ **面向識別顯示**：根據插入的 A/B 面動態顯示對應圖示
- ✅ **LED 狀態指示**：待機紅燈閃爍、插入後綠燈恆亮
- ✅ **退出按鈕**：插入後自動產生 ⏏️ 按鈕，可恢復原狀態
- ✅ **視覺增強**：未插入狀態使用 💿︎ (1F4BF FE0E) 帶增亮效果

### 📊 資料顯示系統
- ✅ **雙面資料差異**：A/B 面顯示不同的模擬實驗資料
- ✅ **動態內容生成**：根據抽屜編號產生對應的指針位置資訊
- ✅ **科幻風格設計**：終端機風格的資料顯示介面
- ✅ **狀態同步**：讀卡機與資料區塊狀態完全同步
- ✅ **故事元素整合**：包含實驗日期、代號、系統狀態等解謎線索
- ✅ **內容優化**：移除與謎題無關的狀態監控描述，聚焦核心功能

---

## 🧱 技術棧

- **前端框架**：HTML5 + Bootstrap 5（Accordion 元件）
- **樣式系統**：獨立 CSS 檔案，深色科技風格主題
- **互動邏輯**：原生 JavaScript，事件委派架構
- **模板引擎**：EJS（動態生成 12 層抽屜）
- **後端服務**：Express.js + 靜態檔案服務
- **拖曳實現**：HTML5 Drag & Drop API

---

## 📐 視覺設計規範

### 色彩系統
- **主背景**：#0f1116（深空藍黑）
- **抽屜色系**：#1c1f26（未開啟）→ #2a2f38（開啟狀態）
- **高亮色**：#91d1ff（科技藍）
- **紅指針**：#ff4757（鮮紅色，帶發光效果）
- **藍指針**：#3742fa（鮮藍色，帶發光效果）
- **Disk A 面**：#4CAF50（綠色，代表正常資料）
- **Disk B 面**：#FF9800（橙色，代表隱藏/警告資料）

### 互動回饋
- **拖曳狀態**：透明度 0.7 + 旋轉 5 度
- **懸停效果**：讀卡機藍色光暈
- **禁用狀態**：透明度 0.4 + 灰色調
- **動畫效果**：旋轉翻轉 180 度（150ms）

---

## 🎮 互動操作指南

### 基本操作流程
1. **觀察指針**：查看紅藍指針當前位置和時間錨點狀態
2. **測試指針**：點擊 🎲 隨機指針或 🔄 重置指針按鈕
3. **開啟抽屜**：只能點擊1、3號或紅指針指向的抽屜（羅馬數字），其他受限制
4. **翻轉 Disk**：點擊 Disk 右下角的翻轉按鈕（🔄）切換 A/B 面
5. **拖曳插入**：將 Disk 拖曳至讀卡機插槽，視覺高亮提示拖放區域
6. **讀取資料**：成功插入後自動顯示對應面的資料內容
7. **退出 Disk**：點擊讀卡機的退出按鈕（⏏️）移除 Disk
8. **關閉抽屜**：再次點擊同一抽屜標題關閉，解除其他抽屜禁用

### 進階互動規則
| 操作 | 描述 | 視覺回饋 |
|------|------|----------|
| 紅藍指針記分板 | 紅指針隨機變化，藍指針手動調整 | 發光邊框、動畫效果 |
| 藍指針時鐘調整 | 點擊藍指針或🕐圖示彈出12點位時鐘面板 | 羅馬數字圓形排列、指針轉動 |
| 紅指針抽屜限制 | 只能開啟1、3號及紅指針指向的抽屜 | 受限抽屜顯示灰色+🔒圖示 |
| 單一抽屜開啟 | 同時只能開啟一層抽屜，其他自動禁用 | 其他抽屜變灰禁用 |
| Disk 正反面識別 | 自動偵測當前顯示面，插入後顯示對應圖示 | A 面💿綠框、B 面📀橙框 |
| 讀卡機智能狀態 | 插入時隱藏提示，退出時恢復顯示 | LED 燈色彩、狀態文字、圖示切換 |
| 資料內容差異化 | A/B 面顯示不同實驗資料 | 終端機風格差異化內容 |

---

## 🔬 Unicode 圖示系統

### Disk 圖示配置
- **A面 Disk**: 💿 (U+1F4BF) - 標準光碟圖示
- **B面 Disk**: 📀 (U+1F4C0) - DVD 圖示  
- **讀卡機未插入**: 💿︎ (U+1F4BF U+FE0E) - 文字變體光碟圖示，配合亮度增強
- **插槽狀態**: 根據插入的 A/B 面動態顯示對應圖示

### 控制圖示
- **時鐘調整**: 🕐 (U+1F550) - 一點鐘圖示
- **隨機指針**: 🎲 (U+1F3B2) - 骰子圖示
- **重置指針**: 🔄 (U+1F504) - 重新整理圖示
- **翻轉 Disk**: 🔄 (U+1F504) - 重新整理圖示
- **退出按鈕**: ⏏️ (U+23CF) - 退出符號

---

## 🎮 互動操作指南

### 基本操作流程
1. **觀察指針**：查看紅藍指針當前位置（I~XII 羅馬數字）
2. **調整藍指針**：點擊藍指針值或右下角🕐圖示，彈出時鐘面板選擇12點位
3. **測試指針**：點擊 🎲 隨機指針（僅影響紅指針）或 🔄 重置指針按鈕
4. **開啟抽屜**：點擊任一抽屜標題（羅馬數字），其他抽屜自動禁用
5. **翻轉 Disk**：點擊 Disk 右下角的翻轉按鈕（🔄）切換 A/B 面
6. **拖曳插入**：將 Disk 拖曳至讀卡機插槽，視覺高亮提示拖放區域
7. **讀取資料**：成功插入後自動顯示對應面的資料內容，提示文字自動隱藏
8. **退出 Disk**：點擊讀卡機的退出按鈕（⏏️）移除 Disk
9. **關閉抽屜**：再次點擊同一抽屜標題關閉，解除其他抽屜禁用

### 藍指針時鐘操作
- **開啟時鐘面板**：點擊藍指針數值或右下角時鐘圖示🕐
- **選擇點位**：點擊圓形排列的羅馬數字（I~XII），即時更新藍指針值
- **視覺回饋**：選中的數字高亮顯示，時鐘指針同步轉動
- **關閉面板**：點擊×按鈕、背景區域、或按 ESC 鍵，選擇後0.5秒自動關閉

## 🚀 快速啟動

### 安裝與執行
```bash
# 安裝依賴
npm install

# 啟動開發伺服器
node index.js

# 瀏覽器開啟
http://localhost:3000
```

### 核心依賴
- `express`: ^4.21.2
- `ejs`: ^3.1.10
- `bootstrap`: 5.x（CDN）

### 主要功能測試
- 🎲 點擊「隨機指針」測試紅指針變化（藍指針保持不變）
- 🔄 點擊「重置指針」回到初始狀態（紅I，藍XII）
- 🕐 點擊藍指針或時鐘圖示測試12點位時鐘面板
- 🚫 測試紅指針抽屜限制：只能開啟1、3號或紅指針指向的抽屜
- 📂 點擊抽屜羅馬數字開啟/關閉，測試單一抽屜限制
- 💿 拖曳 Disk 到讀卡機測試插入功能，觀察狀態變化
- 🔄 點擊 Disk 翻轉按鈕切換 A/B 面，測試圖示差異
- ⏏️ 測試退出按鈕恢復讀卡機狀態
- 🏷️ 觀察 Disk 底部編號標籤顯示

### 技術架構
- **前端框架**：HTML5 + Bootstrap 5（Accordion 元件）
- **樣式系統**：獨立 CSS 檔案，深色科技風格主題
- **互動邏輯**：原生 JavaScript，事件委派架構
- **模板引擎**：EJS（動態生成 12 層抽屜與時鐘面板）
- **後端服務**：Express.js + 靜態檔案服務
- **拖曳實現**：HTML5 Drag & Drop API
- **彈窗系統**：原生 CSS 動畫 + JavaScript 事件處理

---

## 📐 視覺設計規範

### 色彩系統
- **主背景**：#0f1116（深空藍黑）
- **抽屜色系**：#1c1f26（未開啟）→ #2a2f38（開啟狀態）
- **高亮色**：#91d1ff（科技藍）
- **紅指針**：#ff4757（鮮紅色，帶發光效果）
- **藍指針**：#3742fa（鮮藍色，帶發光效果）
- **Disk A 面**：#4CAF50（綠色，代表正常資料）
- **Disk B 面**：#FF9800（橙色，代表隱藏/警告資料）
- **讀卡機插槽**：增亮顯示 (#6ee9e9) 提升可視性

### 互動回饋
- **拖曳狀態**：透明度 0.7 + 旋轉 5 度
- **懸停效果**：讀卡機藍色光暈、按鈕縮放變換
- **禁用狀態**：透明度 0.4 + 灰色調
- **動畫效果**：旋轉翻轉 180 度（150ms）、指針縮放（200ms）
- **彈窗動畫**：淡入效果 + 縮放滑入動畫

### 響應式設計
- **指針記分板**：桌面版水平排列，手機版垂直排列
- **讀卡機佈局**：Flexbox 自適應佈局，插槽區域彈性填滿
- **時鐘面板**：固定尺寸 220x220px，居中顯示

---

## 🧩 系統互動規則總覽

| 元件 | 規則 | 描述 |
|------|------|------|
| **紅指針** | 隨機控制 | 只能透過🎲隨機按鈕或🔄重置按鈕改變 |
| **藍指針** | 手動精確調整 | 透過時鐘面板12點位精確選擇 |
| **抽屜系統** | 雙重限制 | 1）只能開啟1、3號及紅指針指向的抽屜 2）一次只能開啟一層 |
| **Disk 系統** | 雙面差異化 | A/B面圖示、邊框色彩、資料內容完全不同，底部顯示編號 |
| **讀卡機** | 智能狀態管理 | 插入時隱藏佔位元素，退出時完全恢復 |
| **資料顯示** | 即時同步 | 根據插入的抽屜編號和 Disk 面向即時更新 |

---

## 🔜 後續擴充方向建議

### 遊戲邏輯增強
- 根據紅藍指針數值實作抽屜解鎖/鎖定邏輯
- 加入時間限制與倒數計時器
- 實作多層謎題解鎖條件判斷

### 互動體驗優化
- 加入音效回饋（插入、翻轉、點擊等）
- 實作更豐富的動畫過場效果
- 支援鍵盤快捷鍵操作

### 資料系統擴展
- 加入更多抽屜的差異化資料內容
- 實作資料之間的邏輯關聯性
- 加入解謎線索的動態提示系統

---

## 📁 檔案結構
```
├── index.js          # Express 伺服器與路由
├── package.json       # 專案配置與依賴
├── public/
│   ├── styles.css     # 自定義 CSS 樣式（深色科技風格）
│   └── cabinet.js     # 完整互動邏輯 JavaScript
├── views/
│   └── cabinet.ejs    # 主要 UI 模板（包含時鐘面板）
└── README.md          # 專案說明文件
```

---

## 🎯 專案完成度

- ✅ **核心 UI 架構**：100% 完成
- ✅ **抽屜互動系統**：100% 完成  
- ✅ **Disk 操作系統**：100% 完成
- ✅ **讀卡機系統**：100% 完成
- ✅ **紅藍指針記分板**：100% 完成
- ✅ **時鐘調整面板**：100% 完成
- ✅ **資料顯示系統**：100% 完成
- ✅ **視覺設計與動畫**：100% 完成
- ✅ **響應式佈局**：100% 完成

**總完成度：100%** - 所有原型功能均已實作完成，可作為密室逃脫謎題的完整前端基礎。

